###################################### - ITEMS - ###################################
#myitem:
#  type: item
#  material: wool:3
#  recipe:
#  - air|air|air
#  - dirt|wool|dirt
#  - air|air|air
kill_mobs:
  type: world
  events:
##########################################
    on mythicmob mob dies by player:
    - ^narrate "<context.level>"
    - ^if <util.random.int[1].to[100]> <= 2 {
      - ^yaml load:drops/data.yml id:<player.name>mobs
      - ^define leveldrop <yaml[<player.name>mobs].list_keys[mythicdrops.ancestral].filter[is[LESS].than[<math.asint:<context.level||>+10>]].random[1].formatted>
      - ^define tierdrop <yaml[<player.name>mobs].read[mythicdrops.ancestral.<def[leveldrop]>.tier]>
      - ^narrate "<def[leveldrop]> <def[tierdrop]>"
      - ^narrate "Ancestral"
      - ^yaml unload id:<player.name>mobs
      - ^queue clear
      } else if <util.random.int[1].to[100]> <= 6 {
      - ^yaml load:drops/data.yml id:<player.name>mobs
      - ^define leveldrop <yaml[<player.name>mobs].list_keys[mythicdrops.legendario].filter[is[LESS].than[<math.asint:<context.level||>+10>]].random[1].formatted>
      - ^define tierdrop <yaml[<player.name>mobs].read[mythicdrops.legendario.<def[leveldrop]>.tier]>
      - ^narrate "<def[leveldrop]> <def[tierdrop]>"
      - ^narrate "Legendario"
      - ^yaml unload id:<player.name>mobs
      - ^queue clear
      } else if <util.random.int[1].to[100]> <= 12 {
      - ^yaml load:drops/data.yml id:<player.name>mobs
      - ^define leveldrop <yaml[<player.name>mobs].list_keys[mythicdrops.raro].filter[is[LESS].than[<math.asint:<context.level||>+10>]].random[1].formatted>
      - ^define tierdrop <yaml[<player.name>mobs].read[mythicdrops.raro.<def[leveldrop]>.tier]>
      - ^narrate "<def[leveldrop]> <def[tierdrop]>"
      - ^narrate "Raro"
      - ^yaml unload id:<player.name>mobs
      - ^queue clear
      } else if <util.random.int[1].to[100]> <= 24 {
      - ^yaml load:drops/data.yml id:<player.name>mobs
      - ^define leveldrop <yaml[<player.name>mobs].list_keys[mythicdrops.magico].filter[is[LESS].than[<math.asint:<context.level||>+10>]].random[1].formatted>
      - ^define tierdrop <yaml[<player.name>mobs].read[mythicdrops.magico.<def[leveldrop]>.tier]>
      - ^narrate "<def[leveldrop]> <def[tierdrop]>"
      - ^narrate "Magico"
      - ^yaml unload id:<player.name>mobs
      - ^queue clear
      } else {
      - ^yaml load:drops/data.yml id:<player.name>mobs
      - ^define leveldrop <yaml[<player.name>mobs].list_keys[mythicdrops.comun].filter[is[LESS].than[<math.asint:<context.level||>+10>]].random[1].formatted>
      - ^define tierdrop <yaml[<player.name>mobs].read[mythicdrops.comun.<def[leveldrop]>.tier]>
      - ^narrate "<def[leveldrop]> <def[tierdrop]>"
      - ^narrate "Comun"
      - ^yaml unload id:<player.name>mobs
      - ^queue clear
      }

Mob_porcent:
    type: task
    script:
    - ^yaml load:personal/<player.name>.yml id:<player.name>
    - ^if <player.flag[cursorid]> == <yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.obj]> && <player.flag[cursordata]> == <yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.data]> {
      - ^if <yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.cant]> > 0 {
        - ^adjust <player> item_on_cursor:i@air
        - ^yaml id:<player.name> set <player.flag[proforigin]>.misionprof.cant:-:<player.flag[cursoridqty]>
        - ^yaml savefile:personal/<player.name>.yml id:<player.name>
        - ^flag <player> questprofcant:<yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.cant]>
        - ^flag <player> questproftarjet:<yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.obj]>
        - ^flag <player> questprofdata:<yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.data]>
        - ^flag <player> profreward:<yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.reward]>
        - ^flag <player> profrewardxp:<yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.xpreward]>
        - ^inventory open d:in@<player.flag[profinv]>
        - ^actionbar "<gray>Entregaste: <gold><player.flag[cursoridqty]> <dark_green>Articulos"
        - ^if <yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.cant]> < 1 {
          - ^inventory close
          - ^narrate "<gold>Recompensas:"
          - ^narrate "<yellow><yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.reward]> <dark_purple>Almakos"
          - ^narrate "<yellow><yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.xpreward]> <dark_purple>Experiencia"
          - ^give money quantity:<yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.reward]>
          - ^execute as_op "jobs grantxp <player.name> <player.flag[profesion]> <yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.xpreward]>" silent
          - ^title "title:<yellow>Mision completada" "subtitle:<green>Regresa en 10 minutos por otra!" stay:5s
          # Agregar los minutos a 10
          - ^flag <player> qprofStatus<player.flag[proforigin]>:oncd duration:10m
          - ^flag <player> <player.flag[proforigin]>ON:!
          - ^yaml savefile:personal/<player.name>.yml id:<player.name>
          }
        - ^flag <player> questprofcant:!
        - ^flag <player> questproftarjet:!
        - ^flag <player> questprofdata:!
        - ^flag <player> profreward:!
        - ^flag <player> profrewardxp:!
        - ^flag <player> proforigin:!
        } else if <yaml[<player.name>].read[<player.flag[proforigin]>.misionprof.cant]> <= 0 {
        - ^adjust <player> item_on_cursor:i@air
        - ^inventory close
        - ^title "title:<yellow>Mision completada" "subtitle:<green>Regresa en 10 minutos por otra!" stay:5s
        # Agregar los minutos a 10
        - ^flag <player> qprofStatus<player.flag[proforigin]>:oncd duration:10m
        - ^flag <player> <player.flag[proforigin]>ON:!
        - ^yaml savefile:personal/<player.name>.yml id:<player.name>
        }
      } else {
      - ^actionbar "<red>Ese articulo no es de la mision"
      }
    - ^flag <player> cursorid:!
    - ^flag <player> cursoridqty:!
    - ^flag <player> questprofdata:!
    - ^flag <player> profinv:!
    - ^yaml unload id:<player.name>
